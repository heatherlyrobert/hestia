#!/usr/local/bin/koios
#   koios-polos (north star) -- customized c unit testing meta-program and mini-language
#   program under test  : hestia_tty
#   auto-generated script file converted from a previous script version
#   updated to the most recent version (v21)



#23456789-12  123  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  -  123456789-123456789- 
#==(verb)===  ver  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  t  ========(var)======= 
PREP          v21  include the prototype headers                                      - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
   incl       v21  include public header                hestia.h                    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  


#23456789-12  123  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  -  123456789-123456789- 
#==(verb)===  ver  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  t  ========(var)======= 
SCRP          v21  (TTY   ) verify tty device name validation                         tty_valid                                                                                             ((01.---))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       v21  prepare for run                                                    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     v21  initialize the system                prog__unit_quiet                                                                                                                  i_equal     0                                                                                                    

   COND       v21  initial success                                                    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((04.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     v21  ...check device                      tty_valid                   "/dev/tty1"                                                                                           i_equal     0                                                                                                    

   COND       v21  run some bad ones                                                  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((04.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     v21  ...check device (NULL)               tty_valid                   NULL                                                                                                  i_lesser    0                                                                                                    
     exec     v21  ...check device (empty)              tty_valid                   ""                                                                                                    i_lesser    0                                                                                                    
     exec     v21  ...check device (non-existant)       tty_valid                   "hathor"                                                                                              i_lesser    0                                                                                                    
     exec     v21  ...check device (non-existant)       tty_valid                   "/dev/ttyperfecto"                                                                                    i_lesser    0                                                                                                    

   COND       v21  run some wrong types                                               - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((04.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     v21  ...check device (directory)          tty_valid                   "/dev"                                                                                                i_lesser    0                                                                                                    
     exec     v21  ...check device (symlink)            tty_valid                   "/dev/core"                                                                                           i_lesser    0                                                                                                    
     exec     v21  ...check device (regular)            tty_valid                   "/readme.txt"                                                                                         i_lesser    0                                                                                                    
     exec     v21  ...check device (block dev)          tty_valid                   "/dev/ram0"                                                                                           i_lesser    0                                                                                                    

   COND       v21  another success                                                    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((04.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     v21  ...check device                      tty_valid                   "/dev/tty9"                                                                                           i_equal     0                                                                                                    

   COND       v21  wrap up testing                                                    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.010))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     v21  wrap up                              prog__unit_end                                                                                                                    i_equal     0                                                                                                    



#23456789-12  123  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  -  123456789-123456789- 
#==(verb)===  ver  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  t  ========(var)======= 
SCRP          v21  (TTY   ) verify tty open and close                                 tty_open, tty_close, tty_review                                                                       ((01.---))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       v21  prepare for run                                                    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     v21  initialize the system                prog__unit_quiet                                                                                                                  i_equal     0                                                                                                    
     code     v21  create a number                      - - - - - - - - - - - - -   int     x_num  = 0;                                                                                                                                                                                                                                               
     code     v21  create a name holder                 - - - - - - - - - - - - -   char    x_dev  [LEN_LABEL];                                                                                                                                                                                                                                       

   COND       v21  look for tty devices (use unusual ones)                            - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((04.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     v21  check active/touched                 tty_review                                                                                                                        i_greater   0                                                                                                    
     get      v21  ...check active                      tty__unit                   "active"               , 0                                                                            s_equal     TTY active       : ¬¬¬¬¬¬¬¬--------------------------------                                          

   COND       v21  start on a success                                                 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((04.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     code     v21  prepare the device file              - - - - - - - - - - - - -   x_num = 15;                                                                                                                                                                                                                                                               
     code     v21  prepare the device file              - - - - - - - - - - - - -   sprintf (x_dev, "/dev/tty%d", x_num);                                                                                                                                                                                                                                             
     code     v21  ...change ownership                  - - - - - - - - - - - - -   chown (x_dev, 1000,  100);                                                                                                                                                                                                                                           
     code     v21  ...change perms                      - - - - - - - - - - - - -   chmod (x_dev, 0755);                                                                                                                                                                                                                                              
     get      v21  ...check stats                       tty__unit                   "stats"                , x_num                                                                        s_equal     TTY stats        : /dev/tty15       y  1000   100  0020755                                           
     exec     v21  check active/touched                 tty_review                                                                                                                        i_greater   0                                                                                                    
     get      v21  ...check active                      tty__unit                   "active"               , 0                                                                            s_equal     TTY active       : ¬¬¬¬¬¬¬¬--------------------------------                                          
     exec     v21  check the device                     tty_valid                   x_dev                                                                                                 i_equal     0                                                                                                    
     exec     v21  open the device                      tty_open                    x_num                                                                                                 i_greater   0                                                                                                    
     get      v21  ...check stats                       tty__unit                   "stats"                , x_num                                                                        s_equal     TTY stats        : /dev/tty15       y     0     0  0020600                                           
     exec     v21  check active/touched                 tty_review                                                                                                                        i_greater   0                                                                                                    
     get      v21  ...check active                      tty__unit                   "active"               , 0                                                                            s_equal     TTY active       : ¬¬¬¬¬¬¬¬-------y------------------------                                          
     exec     v21  close the device                     tty_close                   x_num                                                                                                 i_equal     0                                                                                                    
     exec     v21  check active/touched                 tty_review                                                                                                                        i_greater   0                                                                                                    
     get      v21  ...check active                      tty__unit                   "active"               , 0                                                                            s_equal     TTY active       : ¬¬¬¬¬¬¬¬--------------------------------                                          

   COND       v21  choose a non-existant file                                         - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((04.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     code     v21  prepare the device file              - - - - - - - - - - - - -   x_num = 98;                                                                                                                                                                                                                                                               
     code     v21  prepare the device file              - - - - - - - - - - - - -   sprintf (x_dev, "/dev/tty%d", x_num);                                                                                                                                                                                                                                             
     code     v21  ...change ownership                  - - - - - - - - - - - - -   chown (x_dev, 1000,  100);                                                                                                                                                                                                                                           
     code     v21  ...change perms                      - - - - - - - - - - - - -   chmod (x_dev, 0755);                                                                                                                                                                                                                                              
     get      v21  ...check stats                       tty__unit                   "stats"                , x_num                                                                        s_equal     TTY stats        : /dev/tty98       -     -     -  -------                                              
     exec     v21  check active/touched                 tty_review                                                                                                                        i_greater   0                                                                                                    
     get      v21  ...check active                      tty__unit                   "active"               , 0                                                                            s_equal     TTY active       : ¬¬¬¬¬¬¬¬--------------------------------                                          
     exec     v21  check the device                     tty_valid                   x_dev                                                                                                 i_lesser    0                                                                                                    
     exec     v21  open the device                      tty_open                    x_num                                                                                                 i_lesser    0                                                                                                    
     get      v21  ...check stats                       tty__unit                   "stats"                , x_num                                                                        s_equal     TTY stats        : /dev/tty98       -     -     -  -------                                              
     exec     v21  check active/touched                 tty_review                                                                                                                        i_greater   0                                                                                                    
     get      v21  ...check active                      tty__unit                   "active"               , 0                                                                            s_equal     TTY active       : ¬¬¬¬¬¬¬¬--------------------------------                                          
     exec     v21  close the device                     tty_close                   x_num                                                                                                 i_lesser    0                                                                                                    
     exec     v21  check active/touched                 tty_review                                                                                                                        i_greater   0                                                                                                    
     get      v21  ...check active                      tty__unit                   "active"               , 0                                                                            s_equal     TTY active       : ¬¬¬¬¬¬¬¬--------------------------------                                          

   COND       v21  switch to another                                                  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((04.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     code     v21  prepare the device file              - - - - - - - - - - - - -   strcpy (x_dev, "/dev/tty21");                                                                                                                                                                                                                                             
     code     v21  ...change ownership                  - - - - - - - - - - - - -   chown (x_dev,  123,  250);                                                                                                                                                                                                                                           
     code     v21  ...change perms                      - - - - - - - - - - - - -   chmod (x_dev, 0777);                                                                                                                                                                                                                                              
     get      v21  ...check stats                       tty__unit                   "stats"                , 21                                                                           s_equal     TTY stats        : /dev/tty21       y   123   250  0020777                                           
     exec     v21  check the device                     tty_valid                   x_dev                                                                                                 i_equal     0                                                                                                    
     exec     v21  check active/touched                 tty_review                                                                                                                        i_greater   0                                                                                                    
     get      v21  ...check active                      tty__unit                   "active"               , 0                                                                            s_equal     TTY active       : ¬¬¬¬¬¬¬¬--------------------------------                                          
     exec     v21  open the device                      tty_open                    x_dev                                                                                                 i_greater   0                                                                                                    
     get      v21  ...check stats                       tty__unit                   "stats"                , 21                                                                           s_equal     TTY stats        : /dev/tty21       y     0     0  0020600                                           
     exec     v21  check active/touched                 tty_review                                                                                                                        i_greater   0                                                                                                    
     get      v21  ...check active                      tty__unit                   "active"               , 0                                                                            s_equal     TTY active       : ¬¬¬¬¬¬¬¬-------------y------------------                                          
     exec     v21  close the device                     tty_close                   x_num                                                                                                 i_equal     0                                                                                                    
     exec     v21  check active/touched                 tty_review                                                                                                                        i_greater   0                                                                                                    
     get      v21  ...check active                      tty__unit                   "active"               , 0                                                                            s_equal     TTY active       : ¬¬¬¬¬¬¬¬--------------------------------                                          

   COND       v21  open and close multiple (out of order)                             - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((04.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     code     v21  prepare the device file              - - - - - - - - - - - - -   strcpy (x_dev, "/dev/tty15");                                                                                                                                                                                                                                             
     exec     v21  open the device                      tty_open                    x_dev                                                                                                 i_greater   0                                                                                                    
     exec     v21  check active/touched                 tty_review                                                                                                                        i_greater   0                                                                                                    
     get      v21  ...check active                      tty__unit                   "active"               , 0                                                                            s_equal     TTY active       : ¬¬¬¬¬¬¬¬-------y------------------------                                          
     code     v21  prepare the device file              - - - - - - - - - - - - -   strcpy (x_dev, "/dev/tty32");                                                                                                                                                                                                                                             
     exec     v21  open the device                      tty_open                    x_dev                                                                                                 i_greater   0                                                                                                    
     exec     v21  check active/touched                 tty_review                                                                                                                        i_greater   0                                                                                                    
     get      v21  ...check active                      tty__unit                   "active"               , 0                                                                            s_equal     TTY active       : ¬¬¬¬¬¬¬¬-------y----------------y-------                                          
     code     v21  prepare the device file              - - - - - - - - - - - - -   strcpy (x_dev, "/dev/tty21");                                                                                                                                                                                                                                             
     exec     v21  open the device                      tty_open                    x_dev                                                                                                 i_greater   0                                                                                                    
     exec     v21  check active/touched                 tty_review                                                                                                                        i_greater   0                                                                                                    
     get      v21  ...check active                      tty__unit                   "active"               , 0                                                                            s_equal     TTY active       : ¬¬¬¬¬¬¬¬-------y-----y----------y-------                                          
     exec     v21  close the device                     tty_close                   15                                                                                                    i_equal     0                                                                                                    
     exec     v21  check active/touched                 tty_review                                                                                                                        i_greater   0                                                                                                    
     get      v21  ...check active                      tty__unit                   "active"               , 0                                                                            s_equal     TTY active       : ¬¬¬¬¬¬¬¬-------------y----------y-------                                          
     exec     v21  close the device                     tty_close                   32                                                                                                    i_equal     0                                                                                                    
     exec     v21  check active/touched                 tty_review                                                                                                                        i_greater   0                                                                                                    
     get      v21  ...check active                      tty__unit                   "active"               , 0                                                                            s_equal     TTY active       : ¬¬¬¬¬¬¬¬-------------y------------------                                          
     exec     v21  close the device                     tty_close                   21                                                                                                    i_equal     0                                                                                                    
     exec     v21  check active/touched                 tty_review                                                                                                                        i_greater   0                                                                                                    
     get      v21  ...check active                      tty__unit                   "active"               , 0                                                                            s_equal     TTY active       : ¬¬¬¬¬¬¬¬--------------------------------                                          




   COND       v21  wrap up testing                                                    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.010))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     v21  wrap up                              prog__unit_end                                                                                                                    i_equal     0                                                                                                    



