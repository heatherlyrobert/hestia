#!/usr/local/bin/koios
#   koios-polos (north star) -- customized c unit testing meta-program and mini-language
#   program under test  : hestia_tty
#   auto-generated script file converted from a previous script version
#   updated to the most recent version (v21)


#23456789-12  123  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  -  123456789-123456789- 
#==(verb)===  ver  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  t  ========(var)======= 
PREP          v21  include the prototype headers                                      - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
   incl       v21  include public header                hestia.h                    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  



#23456789-12  123  123456789-123456789-123456789-12345  123456789-123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-  -  123456789-123456789- 
#==(verb)===  ver  ===========(description)===========  =====(function)=====  ========================(arguments)===================================  ==(test)==  ==========================(results)===================================  t  ========(var)======= 
SCRP          v21  (EXEC  ) verify time setting and heartbeat operations        rptg_hearbeat, exec_time                                                ((01.---))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       v21  prepare for run                                                    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((02.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     v21  initialize the system                prog__unit_quiet                                                                                                                  i_equal     0                                                                                                    

   COND       v21  prepare time                                                       - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((04.018))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     v21  set the date                         exec_time                   1320105600                                                                                            i_equal     1320105600
     get      v21  ...check time                        exec__unit                  "time"                 , 0                                                                            s_equal     EXEC time        : 1320105600                                                                        
     get      v21  ...check pid                         exec__unit                  "pid"                  , 0                                                                            s_equal     EXEC pid         : ¬¬¬¬¬                                                                             
     get      v21  ...check heartbeat                   rptg__unit                  "heartbeat"            , 0                                                                            s_equal     RPTG heartbeat   : 11.10.31.17.00.¬¬  1320105600  now  ¬¬¬¬¬                                         
     get      v21  ...check last heartbeat              rptg__unit                  "lastbeat"             , 0                                                                            s_equal     RPTG lastbeat    : 11.10.31.17.00.¬¬  1320105600  now  ¬¬¬¬¬                                         

   COND       v21  prepare time                                                       - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((04.018))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     v21  set the date                         exec_time                   1494680400                                                                                            i_equal     1494680400
     get      v21  ...check time                        exec__unit                  "time"                 , 0                                                                            s_equal     EXEC time        : 1494680400                                                                        
     get      v21  ...check pid                         exec__unit                  "pid"                  , 0                                                                            s_equal     EXEC pid         : ¬¬¬¬¬                                                                             
     get      v21  ...check heartbeat                   rptg__unit                  "heartbeat"            , 0                                                                            s_equal     RPTG heartbeat   : 17.05.13.06.00.¬¬  1494680400  now  ¬¬¬¬¬                                         
     get      v21  ...check last heartbeat              rptg__unit                  "lastbeat"             , 0                                                                            s_equal     RPTG lastbeat    : 17.05.13.06.00.¬¬  1494680400  now  ¬¬¬¬¬                                         

   COND       v21  wrap up testing                                                    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((05.004))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     v21  wrap up                              prog__unit_end                                                                                                                    i_equal     0                                                                                                    




#23456789-12  123  123456789-123456789-123456789-12345  123456789-123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-  -  123456789-123456789- 
#==(verb)===  ver  ===========(description)===========  =====(function)=====  ========================(arguments)===================================  ==(test)==  ==========================(results)===================================  t  ========(var)======= 
SCRP          v21  (EXEC  ) check on normal check, poll cycle                   exec_check, exec_poll, tty_openall                                      ((01.---))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       v21  prepare for run                                                    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((02.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     v21  initialize the system                prog__unit_loud                                                                                                                   i_equal     0                                                                                                    

   COND       v21  create a cron file                                                 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((CC.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     code     v21  add lines                            - - - - - - - - - - - - -   system ("echo \"##/bin/hestia\"                                                                                                                >  /tmp/hestia_test/hestia.conf");                                                        
     code     v21  add lines                            - - - - - - - - - - - - -   system ("echo \"\"                                                                                                                             >> /tmp/hestia_test/hestia.conf");                                                        
     code     v21  add a line                           - - - - - - - - - - - - -   system ("echo \"15  §  on    §  complex  §\"                                                                                                   >> /tmp/hestia_test/hestia.conf");                                                                             
     code     v21  add a line                           - - - - - - - - - - - - -   system ("echo \"21  §  on    §  complex  § different login\"                                                                                   >> /tmp/hestia_test/hestia.conf");                                                                             
     code     v21  add a line                           - - - - - - - - - - - - -   system ("echo \"32  §  on    §  complex  §\"                                                                                                   >> /tmp/hestia_test/hestia.conf");                                                                             
     code     v21  add lines                            - - - - - - - - - - - - -   system ("echo \"\"                                                                                                                             >> /tmp/hestia_test/hestia.conf");                                                        
     code     v21  add lines                            - - - - - - - - - - - - -   system ("echo \"## end of file\"                                                                                                               >> /tmp/hestia_test/hestia.conf");                                                        

   COND       v21  read the configuration file                                        - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((04.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     v21  call config read                     conf_driver                                                                                                                       i_equal     0                                                                                                    

   COND       v21  check statuses on ttys                                             - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((04.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     get      v21  ...check 15th                        tty__unit                   "flags"                , 15                                                                           s_equal     TTY flags   (15) : /dev/tty15       y  y  -  -  -1      -1                                           
     get      v21  ...check 16th                        tty__unit                   "flags"                , 16                                                                           s_equal     TTY flags   (16) : /dev/tty16       y  -  -  -  -1      -1                                           
     get      v21  ...check 20th                        tty__unit                   "flags"                , 20                                                                           s_equal     TTY flags   (20) : /dev/tty20       y  -  -  -  -1      -1                                           
     get      v21  ...check 21st                        tty__unit                   "flags"                , 21                                                                           s_equal     TTY flags   (21) : /dev/tty21       y  y  -  -  -1      -1                                           
     get      v21  ...check 32nd                        tty__unit                   "flags"                , 32                                                                           s_equal     TTY flags   (32) : /dev/tty32       y  y  -  -  -1      -1                                           
     get      v21  ...check 39th                        tty__unit                   "flags"                , 39                                                                           s_equal     TTY flags   (39) : /dev/tty39       y  -  -  -  -1      -1                                           

   COND       v21  open and watch the allowed terminals                               - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((04.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     v21  call openall                         tty_openall                                                                                                                       i_equal     3                                                                                                    

   COND       v21  check statuses on ttys                                             - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((04.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     get      v21  ...check 15th                        tty__unit                   "flags"                , 15                                                                           s_equal     TTY flags   (15) : /dev/tty15       y  y  y  -  ¬¬      -1                                           
     get      v21  ...check 16th                        tty__unit                   "flags"                , 16                                                                           s_equal     TTY flags   (16) : /dev/tty16       y  -  -  -  -1      -1                                           
     get      v21  ...check 20th                        tty__unit                   "flags"                , 20                                                                           s_equal     TTY flags   (20) : /dev/tty20       y  -  -  -  -1      -1                                           
     get      v21  ...check 21st                        tty__unit                   "flags"                , 21                                                                           s_equal     TTY flags   (21) : /dev/tty21       y  y  y  -  ¬¬      -1                                           
     get      v21  ...check 32nd                        tty__unit                   "flags"                , 32                                                                           s_equal     TTY flags   (32) : /dev/tty32       y  y  y  -  ¬¬      -1                                           
     get      v21  ...check 39th                        tty__unit                   "flags"                , 39                                                                           s_equal     TTY flags   (39) : /dev/tty39       y  -  -  -  -1      -1                                           

   GROUP      v21  start to process the ttys                                          - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       v21  check the running sessions (nothing running)                       - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((04.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     v21  call check                           exec_check                                                                                                                        i_equal     0                                                                                                    

   COND       v21  poll all the tty lines (nothing in-bound)                          - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((04.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     v21  call poll                            exec_poll                                                                                                                         i_equal     0                                                                                                    

   COND       v21  check statuses on ttys                                             - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((04.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     get      v21  ...check 15th                        tty__unit                   "flags"                , 15                                                                           s_equal     TTY flags   (15) : /dev/tty15       y  y  y  -  ¬¬      -1                                           
     get      v21  ...check 16th                        tty__unit                   "flags"                , 16                                                                           s_equal     TTY flags   (16) : /dev/tty16       y  -  -  -  -1      -1                                           
     get      v21  ...check 20th                        tty__unit                   "flags"                , 20                                                                           s_equal     TTY flags   (20) : /dev/tty20       y  -  -  -  -1      -1                                           
     get      v21  ...check 21st                        tty__unit                   "flags"                , 21                                                                           s_equal     TTY flags   (21) : /dev/tty21       y  y  y  -  ¬¬      -1                                           
     get      v21  ...check 32nd                        tty__unit                   "flags"                , 32                                                                           s_equal     TTY flags   (32) : /dev/tty32       y  y  y  -  ¬¬      -1                                           
     get      v21  ...check 39th                        tty__unit                   "flags"                , 39                                                                           s_equal     TTY flags   (39) : /dev/tty39       y  -  -  -  -1      -1                                           

   GROUP      v21  ping one and run the processes again                               - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       v21  check the running sessions (nothing running)                       - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((04.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     v21  call check                           exec_check                                                                                                                        i_equal     0                                                                                                    

   COND       v21  ping a tty                                                         - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((04.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
#     code     v21  add lines                            - - - - - - - - - - - - -   system ("echo \"ping\n\" > /dev/tty21");                                                                                                                                                                                                 
     exec     v21  call ping                            exec__unit_ping             20                                                                                                    i_equal     0                                                                                                    
     exec     v21  call ping                            exec__unit_ping             21                                                                                                    i_equal     0                                                                                                    
     exec     v21  call ping                            exec__unit_ping             22                                                                                                    i_equal     0                                                                                                    

   COND       v21  poll all the tty lines (nothing in-bound)                          - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((04.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     code     v21  sleep a bit                          - - - - - - - - - - - - -   sleep (0.5);                                                                                                                                                                                                                             
     exec     v21  call poll                            exec_poll                                                                                                                         i_equal     1                                                                                                    

   COND       v21  check statuses on ttys                                             - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((04.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     get      v21  ...check 15th                        tty__unit                   "flags"                , 15                                                                           s_equal     TTY flags   (15) : /dev/tty15       y  y  y  -  ¬¬      -1                                           
     get      v21  ...check 16th                        tty__unit                   "flags"                , 16                                                                           s_equal     TTY flags   (16) : /dev/tty16       y  -  -  -  -1      -1                                           
     get      v21  ...check 20th                        tty__unit                   "flags"                , 20                                                                           s_equal     TTY flags   (20) : /dev/tty20       y  -  -  -  -1      -1                                           
     get      v21  ...check 21st                        tty__unit                   "flags"                , 21                                                                           s_equal     TTY flags   (21) : /dev/tty21       y  y  y  -  ¬¬      -1                                           
     get      v21  ...check 32nd                        tty__unit                   "flags"                , 32                                                                           s_equal     TTY flags   (32) : /dev/tty32       y  y  y  -  ¬¬      -1                                           
     get      v21  ...check 39th                        tty__unit                   "flags"                , 39                                                                           s_equal     TTY flags   (39) : /dev/tty39       y  -  -  -  -1      -1                                           




   COND       v21  wrap up testing                                                    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((05.004))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     v21  wrap up                              prog__unit_end                                                                                                                    i_equal     0                                                                                                    




